# src/test/resources/serenity.conf

# 1. MODO FANTASMA (HEADLESS)
# true = No se abre la ventana (trabaja en fondo). Ideal para velocidad.
# false = Se abre la ventana (ves lo que hace). Ideal para depurar.
headless.mode = true

# 2. CONFIGURACIÓN DEL DRIVER
webdriver {
  driver = chrome
  autodownload = true

  capabilities {
    "goog:chromeOptions" {
      args = [
        # Configuración Básica
        "start-maximized",
        "remote-allow-origins=*",
        "test-type",
        "no-sandbox",
        "ignore-certificate-errors",

        # Anti-Detección
        "disable-blink-features=AutomationControlled",
        "disable-infobars",
        "disable-popup-blocking",

        # Simular un usuario real (User Agent)
        "user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",

        # Vital para Headless: Define un tamaño de ventana fijo para que encuentre los elementos
        "window-size=1920,1080"
      ]
    }
  }
}

# 3. REPORTES
serenity {
  take.screenshots = FOR_FAILURES # Solo toma foto si falla (ahorra espacio)
  console.colors = true
}